<?xml version="1.0" encoding="UTF-8"?>
<custom-sql>
	<sql id="org.opencps.servicemgt.service.persistence.TemplateFileFinder.searchTemplateFile">	
		<![CDATA[
			SELECT
				opencps_templatefile.*
			FROM
				opencps_templatefile
			WHERE
				(groupId = ?) 
			AND
				((lower(opencps_templatefile.fileName) LIKE ? [$AND_OR_NULL_CHECK$]) OR (lower(opencps_templatefile.fileNo) LIKE ? [$AND_OR_NULL_CHECK$]))
		]]>
	</sql>
	<sql id="org.opencps.servicemgt.service.persistence.TemplateFileFinder.countTemplateFile">	
		<![CDATA[
			SELECT
				count(*) AS COUNT_VALUE
			FROM
				opencps_templatefile
			WHERE
				(groupId = ?) 
			AND
				((lower(opencps_templatefile.fileName) LIKE ? [$AND_OR_NULL_CHECK$]) OR (lower(opencps_templatefile.fileNo) LIKE ? [$AND_OR_NULL_CHECK$]))
		]]>
	</sql>

	<!-- <sql id="org.opencps.servicemgt.service.persistence.ServiceInfoFinder.searchService">	
		<![CDATA[
			SELECT
				opencps_serviceinfo.*
			FROM
				opencps_serviceinfo
			WHERE
				groupId = ?
			AND (
				(lower(opencps_serviceinfo.serviceName) LIKE ? [$AND_OR_NULL_CHECK$]) OR (lower(opencps_serviceinfo.fullName) LIKE ? [$AND_OR_NULL_CHECK$])
			 )
			AND (opencps_serviceinfo.administrationCode = ?)
			AND (opencps_serviceinfo.domainCode = ?)
		]]>
	</sql>

	<sql id="org.opencps.servicemgt.service.persistence.ServiceInfoFinder.countService">	
		<![CDATA[
			SELECT
				count(*) AS COUNT_VALUE
			FROM
				opencps_serviceinfo
			WHERE
				groupId = ?
			AND (
				(lower(opencps_serviceinfo.serviceName) LIKE ? [$AND_OR_NULL_CHECK$]) OR (lower(opencps_serviceinfo.fullName) LIKE ? [$AND_OR_NULL_CHECK$])
			 )
			AND (opencps_serviceinfo.administrationCode = ?)
			AND (opencps_serviceinfo.domainCode = ?)
		]]>
	</sql> -->
	
	<sql id="org.opencps.servicemgt.service.persistence.ServiceInfoFinder.searchService">	
		<![CDATA[
			SELECT
				opencps_serviceinfo.*
			FROM
				opencps_serviceinfo 
			LEFT JOIN opencps_service_config ON opencps_serviceinfo.serviceInfoId = opencps_service_config.serviceInfoId 
			WHERE
				opencps_serviceinfo.groupId = ?
			AND ((lower(opencps_serviceinfo.serviceName) LIKE ?) OR (lower(opencps_serviceinfo.fullName) LIKE ?))
			AND (opencps_serviceinfo.administrationCode = ?)
			AND ((opencps_serviceinfo.domainCode = ?) OR (opencps_serviceinfo.domainIndex like ?))
			AND (opencps_service_config.serviceLevel = ?)
			GROUP BY opencps_serviceinfo.serviceInfoId
			ORDER BY opencps_serviceinfo.createDate
		]]>
	</sql>

	<sql id="org.opencps.servicemgt.service.persistence.ServiceInfoFinder.countService">	
		<![CDATA[
			SELECT
				count(*) AS COUNT_VALUE
			FROM
				opencps_serviceinfo 
			LEFT JOIN opencps_service_config ON opencps_serviceinfo.serviceInfoId = opencps_service_config.serviceInfoId 
			WHERE
				opencps_serviceinfo.groupId = ?
			AND ((lower(opencps_serviceinfo.serviceName) LIKE ?) OR (lower(opencps_serviceinfo.fullName) LIKE ?))
			AND (opencps_serviceinfo.administrationCode = ?)
			AND ((opencps_serviceinfo.domainCode = ?) OR (opencps_serviceinfo.domainIndex like ?))
			AND (opencps_service_config.serviceLevel = ?)
			GROUP BY opencps_serviceinfo.serviceInfoId
		]]>
	</sql>
</custom-sql>
